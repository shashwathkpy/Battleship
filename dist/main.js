(()=>{"use strict";const t=class{constructor(t){this.length=t,this.hitCount=0,this.sunk=!1}hit(){this.hitCount++,this.isSunk()}isSunk(){return this.length==this.hitCount&&(this.sunk=!0),this.sunk}},s=class{constructor(){this.board=this.buildGrid(),this.attacks=[],this.misses=[]}buildGrid(){let t=[];for(let s=0;s<10;s++){t.push([]);for(let o=0;o<10;o++)t[s].push(null)}return t}placeShip(s,o,e){const i=new t(e);let a=!1;const l=s[0],n=s[1];if(o)if(l+i.length<=this.board.length){for(let t=0;t<i.length;t++)this.board[l+t][n]&&(a=!0,console.log("SHIP DETECTED!"));if(!a)for(let t=0;t<i.length;t++)this.getAdjacent(l+t,n),this.board[l+t][n]=i}else console.log("ship out of bounds");else if(n+i.length<=this.board.length){for(let t=0;t<i.length;t++)this.board[l][n+t]&&(a=!0,console.log("SHIP DETECTED!"));if(!a)for(let t=0;t<i.length;t++)this.getAdjacent(l,n+t),this.board[l][n+t]=i}else console.log("ship out of bounds")}validPos(t,s,o,e){return t<0||s<0||t>o-1||s>e-1?0:1}getAdjacent(s,o){let e=this.board.length,i=this.board[0].length;this.validPos(s-1,o-1,e,i)&&(this.board[s-1][o-1]=1),!this.validPos(s-1,o,e,i)||this.board[s-1][o]instanceof t||(this.board[s-1][o]=1),this.validPos(s-1,o+1,e,i)&&(this.board[s-1][o+1]=1),!this.validPos(s,o-1,e,i)||this.board[s][o-1]instanceof t||(this.board[s][o-1]=1),!this.validPos(s,o+1,e,i)||this.board[s][o+1]instanceof t||(this.board[s][o+1]=1),this.validPos(s+1,o-1,e,i)&&(this.board[s+1][o-1]=1),!this.validPos(s+1,o,e,i)||this.board[s+1][o]instanceof t||(this.board[s+1][o]=1),this.validPos(s+1,o+1,e,i)&&(this.board[s+1][o+1]=1)}recieveAttack(s){for(let t=0;t<this.attacks.length;t++)if(this.attacks[t][0]==s[0]&&this.attacks[t][1]==s[1])return"alreadyHit";return this.attacks.push(s),this.board[s[0]][s[1]]instanceof t?(this.board[s[0]][s[1]].hit(),this.allSunk()&&console.log("All ships sunk!"),!0):(this.misses.push(s),!1)}allSunk(){for(let s=0;s<this.board.length;s++)for(let o=0;o<this.board.length;o++)if(this.board[s][o]instanceof t&&!this.board[s][o].isSunk())return!1;return!0}},o=class{constructor(t){this.enemyBoard=t,this.attackedCoord}attack(t){return this.enemyBoard.recieveAttack(t)}randomAttack(){const t=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];return this.attackedCoord=t,this.enemyBoard.recieveAttack(t)}};function e(s){const o=document.createElement("div");0==document.getElementsByClassName("board").length?o.id="1":o.id="2",o.classList.add("board"),document.querySelector("body").appendChild(o);for(let e=0;e<s.board.length;e++)for(let i=0;i<s.board[e].length;i++){const a=document.createElement("div");a.classList.add("tile"),a.id=`${e},${i},${o.id}`,a.textContent=`${e},${i}`,s.board[e][i]instanceof t&&a.classList.add("ship"),"2"==o.id?(a.classList.add("computerTile"),a.onclick=function(){player.attack([e,i])?this.style.backgroundColor="red":this.style.backgroundColor="lightblue"}):a.classList.add("playerTile"),o.appendChild(a)}}!function(){const t=new s;t.placeShip([1,1],!1,5),t.placeShip([3,4],!1,4),t.placeShip([6,5],!0,3),t.placeShip([5,1],!1,3),t.placeShip([8,1],!0,2);const i=new s;i.placeShip([0,0],!0,5),i.placeShip([3,4],!1,4),i.placeShip([6,8],!0,3),i.placeShip([6,2],!1,3),i.placeShip([0,5],!0,2),e(t),e(i);const a=new o(t);for(new o(i),console.log(t.allSunk());!t.allSunk();){const t=document.querySelectorAll(".playerTile");let s=a.randomAttack();for(;"alreadyHit"==s;)s=a.randomAttack();t.forEach((t=>{const o=t.id.split(",");[o[0],o[1]]==a.attackedCoord.toString()&&(s?(t.style.backgroundColor="red",s=!1):t.style.backgroundColor="lightblue")}))}}()})();